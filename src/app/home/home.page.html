<ion-menu side="end" menuId="menu-filtros" contentId="contenidoHome">
  <ion-header>
    <ion-toolbar color="primary">
      <ion-title>Filtros</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content fullscreen="false" class="ion-padding">

    <!-- TALLA -->
    <ion-label class="pill-label">Talla</ion-label>
    <div class="pills">
      <button *ngFor="let t of ['S', 'M', 'L', 'XL']"
              [class.selected]="filtros.talla === t"
              (click)="filtros.talla = t">
        {{ t }}
      </button>
      <button [class.selected]="filtros.talla === ''"
              (click)="filtros.talla = ''">
        Todas
      </button>
    </div>

    <!-- TIPO -->
    <ion-label class="pill-label">Tipo</ion-label>
    <div class="pills">
      <button *ngFor="let tipo of ['Polera', 'Pantalón', 'Vestido', 'Chaqueta']"
              [class.selected]="filtros.tipo === tipo"
              (click)="filtros.tipo = tipo">
        {{ tipo }}
      </button>
      <button [class.selected]="filtros.tipo === ''"
              (click)="filtros.tipo = ''">
        Todos
      </button>
    </div>

    <!-- ESTADO -->
    <ion-label class="pill-label">Estado</ion-label>
    <div class="pills">
      <button *ngFor="let estado of ['Nuevo','Como nueva', 'Usado']"
              [class.selected]="filtros.estado === estado"
              (click)="filtros.estado = estado">
        {{ estado }}
      </button>
      <button [class.selected]="filtros.estado === ''"
              (click)="filtros.estado = ''">
        Todos
      </button>
    </div>

    <!-- UBICACIÓN -->
    <ion-label class="pill-label">Ubicación</ion-label>
    <div class="pills">
      <button *ngFor="let ubicacion of ['Santiago', 'Valparaíso', 'Concepción']"
              [class.selected]="filtros.ubicacion === ubicacion"
              (click)="filtros.ubicacion = ubicacion">
        {{ ubicacion }}
      </button>
      <button [class.selected]="filtros.ubicacion === ''"
              (click)="filtros.ubicacion = ''">
        Todas
      </button>
    </div>

    <!-- BOTONES -->
    <ion-button expand="block" color="medium" class="ion-margin-top" (click)="aplicarFiltros()" id="botonAplicarFiltros">
      Aplicar filtros
    </ion-button>

    <ion-button expand="block" fill="clear" color="dark" (click)="limpiarFiltros()">
      Limpiar filtros
    </ion-button>

  </ion-content>
</ion-menu>


<!-- Header -->
<app-header></app-header>

<!-- Contenido principal -->
<ion-content id="contenidoHome" class="ion-padding">
  <ion-text color="primary">
    <h1 class="ion-text-center">Explora las últimas prendas</h1>
  </ion-text>

  <!-- Botones superiores -->
  <div class="botones-superiores">
    <ion-button size="small" fill="solid" color="medium" (click)="abrirMenu()">
      <ion-icon name="funnel-outline" slot="start"></ion-icon>
      Filtrar
    </ion-button>
    <ion-button size="small" fill="solid" color="medium" (click)="irAPublicar()">
      <ion-icon name="add-circle-outline" slot="start"></ion-icon>
      Publicar
    </ion-button>
  </div>

  <!-- Grilla de prendas -->
  <div class="grid-prendas" *ngIf="prendasFiltradas.length > 0; else sinResultados">
    <div class="item-prenda" *ngFor="let prenda of prendasFiltradas" (click)="verDetalle(prenda.id!)">
      <img [src]="prenda.imagen" alt="Imagen de {{ prenda.titulo }}" />
      <div class="info-prenda">
        <h3>{{ prenda.titulo }}</h3>
        <p>${{ prenda.precio }}</p>
      </div>
    </div>
  </div>

  <!-- Sin resultados -->
  <ng-template #sinResultados>
    <ion-text color="medium">
      <p class="ion-text-center">No se encontraron prendas con esos filtros.</p>
    </ion-text>
  </ng-template>
</ion-content>

<!-- Footer -->
<ion-footer>
  <ion-toolbar color="dark">
    <ion-title size="small" class="ion-text-center">
      Copyright © ReVístete 2025
    </ion-title>
  </ion-toolbar>
</ion-footer>
